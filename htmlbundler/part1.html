<!doctype html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>!!!TITLE!!!</title>
    <meta name="description" content="!!!TITLE!!!">
    <link href='https://fonts.googleapis.com/css2?family=Nunito&display=swap' rel='stylesheet'>
    <script defer>
        let href = window.location.href;
        if (href[href.length-1] == "#")
            href = href.slice(0, href.length-1)

        let repoURL = encodeURIComponent(href);
        document.getElementById("add-repo").href = "mochi://add-repo?url=" + repoURL;

        function addModule() {
            navigator.clipboard.writeText(href)
            alert("Mochi still hasn't implemented URL schemes. The repo URL has been copied to your clipboard. Add it manually to the app.")
            return false;
        }


        function searchModule() {
            // Declare variables
            var input, filter, ul, li, a, i, txtValue;
            input = document.getElementById('module-search-input');
            filter = input.value.toUpperCase();
            ul = document.getElementById("modules-list");
            li = ul.getElementsByTagName('li');

            // Loop through all list items, and hide those who don't match the search query
            for (i = 0; i < li.length; i++) {
                const elem = li[i]
                a = elem.getElementsByTagName("h2")[0];
                txtValue = a.textContent || a.innerText;
                
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    elem.classList.add("fade-in");
                    elem.classList.remove("fade-out");
                    elem.style.display = ""; // Reset display to default
                } else {
                    const elem = li[i]
                    elem.classList.add("fade-out");
                    elem.classList.remove("fade-in");
                    // Note: if you type too fast this causes issues but i dO NOT care rn
                    setTimeout(() => {
                        elem.style.display = "none";
                    }, 200);
                }
            }
        } 
    </script>
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="title">
                <div class="title-content">!!!TITLE!!!</div>
            </div>
            <a id="add-repo">Add Repo</a>
        </div>
        <div class="search-container">
            <input type="text" id="module-search-input" placeholder="Search..." onkeyup="searchModule()" >
        </div>
        <ul id="modules-list">
